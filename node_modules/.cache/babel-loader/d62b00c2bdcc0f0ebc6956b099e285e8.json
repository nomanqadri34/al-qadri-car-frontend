{"ast":null,"code":"var _jsxFileName = \"E:\\\\car rental\\\\client\\\\src\\\\pages\\\\auth\\\\login.js\";\nimport React, { useState } from \"react\";\nimport Layout from \"./../../components/Layout/Layout\";\nimport axios from \"axios\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport toast from \"react-hot-toast\";\nimport \"../../styles/authstyles.css\";\nimport { useAuth } from \"../../context/auth\";\nconst Login = () => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  // eslint-disable-next-line\n  const [auth, setAuth] = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  // form function\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const res = await axios.post(\"/api/v1/auth/login\", {\n        email,\n        password\n      });\n      if (res.data.success) {\n        var _location$state;\n        toast.success(res.data.message);\n        setAuth({\n          // Update the authentication state\n          user: res.data.user,\n          token: res.data.token\n        });\n        localStorage.setItem(\"auth\", JSON.stringify(res.data));\n        const redirectPath = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.from) || \"/\"; // Redirect to previous location if available, else to \"/\"\n        navigate(redirectPath);\n      } else {\n        toast.error(res.data.message);\n      }\n    } catch (error) {\n      console.error(error);\n      toast.error(\"Something went wrong\");\n    }\n  };\n  return /*#__PURE__*/React.createElement(Layout, {\n    title: \"Login - Ecommerce App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-container\",\n    style: {\n      minHeight: \"90vh\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, \"LOGIN FORM\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    autoFocus: true,\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    className: \"form-control\",\n    id: \"exampleInputEmail1\",\n    placeholder: \"Enter Your Email\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    className: \"form-control\",\n    id: \"exampleInputPassword1\",\n    placeholder: \"Enter Your Password\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn forgot-btn\",\n    onClick: () => {\n      navigate(\"/forgot-password\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, \"Forgot Password\")), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, \"LOGIN\"))));\n};\nexport default Login;","map":{"version":3,"names":["React","useState","Layout","axios","useNavigate","useLocation","toast","useAuth","Login","email","setEmail","password","setPassword","auth","setAuth","navigate","location","handleSubmit","e","preventDefault","res","post","data","success","_location$state","message","user","token","localStorage","setItem","JSON","stringify","redirectPath","state","from","error","console","createElement","title","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","style","minHeight","onSubmit","type","autoFocus","value","onChange","target","id","placeholder","required","onClick"],"sources":["E:/car rental/client/src/pages/auth/login.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport Layout from \"./../../components/Layout/Layout\";\r\nimport axios from \"axios\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport toast from \"react-hot-toast\";\r\nimport \"../../styles/authstyles.css\";\r\nimport { useAuth } from \"../../context/auth\";\r\nconst Login = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n   // eslint-disable-next-line\r\n  const [auth, setAuth] = useAuth();\r\n\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n // form function\r\n const handleSubmit = async (e) => {\r\n  e.preventDefault();\r\n  try {\r\n    const res = await axios.post(\"/api/v1/auth/login\", {\r\n      email,\r\n      password,\r\n    });\r\n    if (res.data.success) {\r\n      toast.success(res.data.message);\r\n      setAuth({ // Update the authentication state\r\n        user: res.data.user,\r\n        token: res.data.token,\r\n      });\r\n      localStorage.setItem(\"auth\", JSON.stringify(res.data));\r\n\r\n      const redirectPath = location.state?.from || \"/\"; // Redirect to previous location if available, else to \"/\"\r\n      navigate(redirectPath);\r\n    } else {\r\n      toast.error(res.data.message);\r\n    }\r\n  } catch (error) {\r\n    console.error(error);\r\n    toast.error(\"Something went wrong\");\r\n  }\r\n};\r\n\r\nreturn (\r\n  <Layout title=\"Login - Ecommerce App\">\r\n    <div className=\"form-container\" style={{ minHeight: \"90vh\" }}>\r\n      <form onSubmit={handleSubmit}>\r\n        <h4 className=\"title\">LOGIN FORM</h4>\r\n        <div className=\"mb-3\">\r\n          <input\r\n            type=\"email\"\r\n            autoFocus\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            className=\"form-control\"\r\n            id=\"exampleInputEmail1\"\r\n            placeholder=\"Enter Your Email\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          <input\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            className=\"form-control\"\r\n            id=\"exampleInputPassword1\"\r\n            placeholder=\"Enter Your Password\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn forgot-btn\"\r\n            onClick={() => {\r\n              navigate(\"/forgot-password\");\r\n            }}\r\n          >\r\n            Forgot Password\r\n          </button>\r\n        </div>\r\n        <button type=\"submit\" className=\"btn btn-primary\">\r\n          LOGIN\r\n        </button>\r\n      </form>\r\n    </div>\r\n  </Layout>\r\n);\r\n};\r\n\r\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}